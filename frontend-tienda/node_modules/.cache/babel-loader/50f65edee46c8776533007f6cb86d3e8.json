{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kevin\\\\Desktop\\\\Tienda\\\\frontend-tienda\\\\src\\\\componentes\\\\Galeria.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Galeria.css\";\n/* redux */\n\nimport { useSelector } from \"react-redux\";\n/* react-router-dom */\n\nimport { useParams } from \"react-router-dom\";\n/* axios */\n\nimport axios from \"axios\";\n/* datos del programa */\n\nimport { baseURL, inicioURL, agregarCarritoURL, deshex, arrayBase64 } from \"../datos\";\n/* vista */\n\nconst Articulo = props => {\n  function agregarCarrito() {\n    if (!props.dataid) alert(\"Debes iniciar sesion!!!\");else {\n      let url = baseURL + agregarCarritoURL;\n      let formData = new FormData();\n      formData.append(\"idp\", props.idp);\n      formData.append(\"dataid\", props.dataid.toString());\n      axios.post(url, formData).then(res => alert(res.data == \"0\" ? \"Agregado!\" : \"Error :<\")).catch(err => {});\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cuadricula-articulos__item box-shadow-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"item-link a-limpio\",\n    href: \"/comprar/\" + props.idp + \"/\" + props.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"articulo__img\",\n    src: \"data:image/*;base64,\" + props.img,\n    alt: \"Imagen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"articulo__precio dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, props.precio), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"articulo__separador\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"articulo__titulo dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, props.titulo))));\n};\n\nconst Galeria = props => {\n  const [listado, setListado] = useState([]);\n  const [busqueda, setBusqueda] = useState(true);\n  const [error, setError] = useState(false);\n  const [usr, setUsr] = useState(null);\n  let {\n    categoria,\n    busqueda_query\n  } = useParams();\n  let usr_tmp = useSelector(state => state.usuario);\n  if (usr_tmp && !usr) setUsr(usr_tmp);\n  useEffect(() => {\n    if (busqueda) {\n      let url = baseURL + inicioURL;\n\n      if (categoria) {\n        url += \"?categoria=\" + categoria;\n      } else if (busqueda_query) {\n        url += \"?busqueda=\" + busqueda_query;\n      }\n\n      axios.get(url).then(res => {\n        setListado(res.data);\n        setBusqueda(false);\n        setError(false);\n      }).catch(err => {\n        setError(true);\n      });\n    }\n  }, [listado, busqueda]);\n  if (error) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"Error con la conexion con el Servidor.\");else if (busqueda && !error) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"div-cargando\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 39\n    }\n  });else if (!busqueda && !error && listado.length === 0) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, busqueda_query && 'No hay publicaciones que coincidan con la busqueda \"' + busqueda_query + '\".', !busqueda_query && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: \"4em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gris-mas-oscuro\",\n    style: {\n      fontSize: \"3rem\",\n      marginBottom: \"2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"Todav\\u00eda no hay publicaciones...\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"a-limpio2\",\n    href: \"/vender\",\n    style: {\n      fontSize: \"1.5rem\",\n      color: \"var(--color-principal)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"\\u00a1S\\u00e9 el primero en crear una publicaci\\u00f3n!\"))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galeria-articulos-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cuadricula-articulos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, listado.map(item => {\n    let titulo = deshex(item.titulo);\n    return /*#__PURE__*/React.createElement(Articulo, {\n      idp: item.id,\n      url: item.url,\n      dataid: usr ? usr.dataId : null,\n      titulo: titulo.substring(0, Math.min(60, titulo.length)) + \"...\",\n      precio: item.precio + \"€\",\n      img: arrayBase64(item.imagenes[0].bytes),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    });\n  })));\n};\n\nexport default Galeria;","map":{"version":3,"sources":["C:/Users/kevin/Desktop/Tienda/frontend-tienda/src/componentes/Galeria.jsx"],"names":["React","useState","useEffect","useSelector","useParams","axios","baseURL","inicioURL","agregarCarritoURL","deshex","arrayBase64","Articulo","props","agregarCarrito","dataid","alert","url","formData","FormData","append","idp","toString","post","then","res","data","catch","err","img","precio","titulo","Galeria","listado","setListado","busqueda","setBusqueda","error","setError","usr","setUsr","categoria","busqueda_query","usr_tmp","state","usuario","get","length","marginBottom","fontSize","color","map","item","id","dataId","substring","Math","min","imagenes","bytes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Galeria.css\";\n\n/* redux */\nimport { useSelector } from \"react-redux\";\n\n/* react-router-dom */\nimport { useParams } from \"react-router-dom\";\n\n/* axios */\nimport axios from \"axios\";\n\n/* datos del programa */\nimport {\n  baseURL,\n  inicioURL,\n  agregarCarritoURL,\n  deshex,\n  arrayBase64,\n} from \"../datos\";\n\n/* vista */\n\nconst Articulo = (props) => {\n  function agregarCarrito() {\n    if (!props.dataid) alert(\"Debes iniciar sesion!!!\");\n    else {\n      let url = baseURL + agregarCarritoURL;\n      let formData = new FormData();\n      formData.append(\"idp\", props.idp);\n      formData.append(\"dataid\", props.dataid.toString());\n      axios\n        .post(url, formData)\n        .then((res) => alert(res.data == \"0\" ? \"Agregado!\" : \"Error :<\"))\n        .catch((err) => {});\n    }\n  }\n\n  return (\n    <div className=\"cuadricula-articulos__item box-shadow-1\">\n      <a\n        className=\"item-link a-limpio\"\n        href={\"/comprar/\" + props.idp + \"/\" + props.url}\n      >\n        <img\n          className=\"articulo__img\"\n          src={\"data:image/*;base64,\" + props.img}\n          alt=\"Imagen\"\n        />\n        <div className=\"item-info\">\n          <span className=\"articulo__precio dblock\">{props.precio}</span>\n          <div className=\"articulo__separador\"></div>\n          <span className=\"articulo__titulo dblock\">{props.titulo}</span>\n        </div>\n      </a>\n    </div>\n  );\n};\n\nconst Galeria = (props) => {\n  const [listado, setListado] = useState([]);\n  const [busqueda, setBusqueda] = useState(true);\n  const [error, setError] = useState(false);\n  const [usr, setUsr] = useState(null);\n\n  let { categoria, busqueda_query } = useParams();\n\n  let usr_tmp = useSelector((state) => state.usuario);\n  if (usr_tmp && !usr) setUsr(usr_tmp);\n\n  useEffect(() => {\n    if (busqueda) {\n      let url = baseURL + inicioURL;\n      if (categoria) {\n        url += \"?categoria=\" + categoria;\n      } else if (busqueda_query) {\n        url += \"?busqueda=\" + busqueda_query;\n      }\n      axios\n        .get(url)\n        .then((res) => {\n          setListado(res.data);\n          setBusqueda(false);\n          setError(false);\n        })\n        .catch((err) => {\n          setError(true);\n        });\n    }\n  }, [listado, busqueda]);\n\n  if (error)\n    return (\n      <div className=\"talign-center\">\n        Error con la conexion con el Servidor.\n      </div>\n    );\n  else if (busqueda && !error) return <div className=\"div-cargando\" />;\n  else if (!busqueda && !error && listado.length === 0)\n    return (\n      <div className=\"talign-center\">\n        {busqueda_query &&\n          'No hay publicaciones que coincidan con la busqueda \"' +\n            busqueda_query +\n            '\".'}\n        {!busqueda_query && (\n          <>\n            <div>\n              <div style={{ marginBottom: \"4em\" }}></div>\n              <div\n                className=\"gris-mas-oscuro\"\n                style={{ fontSize: \"3rem\", marginBottom: \"2em\" }}\n              >\n                {\"Todav\\u00eda no hay publicaciones...\"}\n              </div>\n              <a\n                className=\"a-limpio2\"\n                href=\"/vender\"\n                style={{ fontSize: \"1.5rem\", color: \"var(--color-principal)\" }}\n              >\n                {\"\\u00a1S\\u00e9 el primero en crear una publicaci\\u00f3n!\"}\n              </a>\n            </div>\n          </>\n        )}\n      </div>\n    );\n\n  return (\n    <div className=\"galeria-articulos-view\">\n      <div className=\"cuadricula-articulos\">\n        {listado.map((item) => {\n          let titulo = deshex(item.titulo);\n          return (\n            <Articulo\n              idp={item.id}\n              url={item.url}\n              dataid={usr ? usr.dataId : null}\n              titulo={titulo.substring(0, Math.min(60, titulo.length)) + \"...\"}\n              precio={item.precio + \"€\"}\n              img={arrayBase64(item.imagenes[0].bytes)}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Galeria;\n"]},"metadata":{},"sourceType":"module"}