{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kevin\\\\Desktop\\\\Tienda\\\\frontend-tienda\\\\src\\\\componentes\\\\Galeria.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './Galeria.css';\n/* redux */\n\nimport { useSelector } from \"react-redux\";\n/* react-router-dom */\n\nimport { useParams } from \"react-router-dom\";\n/* axios */\n\nimport axios from \"axios\";\n/* datos del programa */\n\nimport { baseURL, inicioURL, agregarCarritoURL, deshex, arrayBase64 } from \"../datos\";\n/* vista */\n\nconst Articulo = props => {\n  function agregarCarrito() {\n    if (!props.dataid) alert(\"Debes iniciar sesion!!!\");else {\n      let url = baseURL + agregarCarritoURL;\n      let formData = new FormData();\n      formData.append(\"idp\", props.idp);\n      formData.append(\"dataid\", props.dataid.toString());\n      axios.post(url, formData).then(res => alert(res.data == \"0\" ? \"Agregado!\" : \"Error :<\")).catch(err => {});\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cuadricula-articulos__item box-shadow-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"item-link a-limpio\",\n    href: \"/comprar/\" + props.idp + \"/\" + props.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"articulo__img\",\n    src: \"data:image/*;base64,\" + props.img,\n    alt: \"Imagen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"articulo__precio dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 6\n    }\n  }, props.precio), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"articulo__separador\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"articulo__titulo dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 6\n    }\n  }, props.titulo))));\n};\n\nconst Galeria = props => {\n  const [listado, setListado] = useState([]);\n  const [busqueda, setBusqueda] = useState(true);\n  const [error, setError] = useState(false);\n  const [usr, setUsr] = useState(null);\n  let {\n    categoria,\n    busqueda_query\n  } = useParams();\n  let usr_tmp = useSelector(state => state.usuario);\n  if (usr_tmp && !usr) setUsr(usr_tmp);\n  useEffect(() => {\n    if (busqueda) {\n      let url = baseURL + inicioURL;\n\n      if (categoria) {\n        url += \"?categoria=\" + categoria;\n      } else if (busqueda_query) {\n        url += \"?busqueda=\" + busqueda_query;\n      }\n\n      axios.get(url).then(res => {\n        setListado(res.data);\n        setBusqueda(false);\n        setError(false);\n      }).catch(err => {\n        setError(true);\n      });\n    }\n\n    ;\n  }, [listado, busqueda]);\n  if (error) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 20\n    }\n  }, \"No se pudo conectar con el servidor.\");else if (busqueda && !error) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"div-cargando\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  });else if (!busqueda && !error && listado.length === 0) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 10\n    }\n  }, busqueda_query && \"No hay publicaciones que coincidan con la busqueda \\\"\" + busqueda_query + \"\\\".\", !busqueda_query && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: \"4em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gris-mas-oscuro\",\n    style: {\n      fontSize: \"3rem\",\n      marginBottom: \"2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 6\n    }\n  }, \"Todav\\u00eda no hay publicaciones...\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"a-limpio2\",\n    href: \"/vender\",\n    style: {\n      fontSize: \"1.5rem\",\n      color: \"var(--color-principal)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  }, \"\\u00a1S\\u00e9 el primero en crear una publicaci\\u00f3n!\"))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galeria-articulos-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cuadricula-articulos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 4\n    }\n  }, listado.map(item => {\n    let titulo = deshex(item.titulo);\n    return /*#__PURE__*/React.createElement(Articulo, {\n      idp: item.id,\n      url: item.url,\n      dataid: usr ? usr.dataId : null,\n      titulo: titulo.substring(0, Math.min(60, titulo.length)) + \"...\",\n      precio: \"$\" + item.precio,\n      img: arrayBase64(item.imagenes[0].bytes),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 14\n      }\n    });\n  })));\n};\n\nexport default Galeria;","map":{"version":3,"sources":["C:/Users/kevin/Desktop/Tienda/frontend-tienda/src/componentes/Galeria.jsx"],"names":["React","useState","useEffect","useSelector","useParams","axios","baseURL","inicioURL","agregarCarritoURL","deshex","arrayBase64","Articulo","props","agregarCarrito","dataid","alert","url","formData","FormData","append","idp","toString","post","then","res","data","catch","err","img","precio","titulo","Galeria","listado","setListado","busqueda","setBusqueda","error","setError","usr","setUsr","categoria","busqueda_query","usr_tmp","state","usuario","get","length","marginBottom","fontSize","color","map","item","id","dataId","substring","Math","min","imagenes","bytes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Galeria.css';\n\n/* redux */\nimport { useSelector } from \"react-redux\";\n\n/* react-router-dom */\nimport { useParams } from \"react-router-dom\";\n\n/* axios */\nimport axios from \"axios\";\n\n/* datos del programa */\nimport { baseURL, inicioURL, agregarCarritoURL, deshex, arrayBase64 } from \"../datos\";\n\n/* vista */ \n\nconst Articulo = (props) => {\n\tfunction agregarCarrito() {\n\t\tif(!props.dataid) alert(\"Debes iniciar sesion!!!\")\n\t\telse {\n\t\t\tlet url = baseURL + agregarCarritoURL;\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append(\"idp\", props.idp);\n\t\t\tformData.append(\"dataid\", props.dataid.toString());\n\t\t\taxios.post(url, formData)\n\t\t\t.then(res => alert(res.data == \"0\" ? \"Agregado!\" : \"Error :<\"))\n\t\t\t.catch(err => {});\n\t\t}\n\t}\n\n    return(\n        <div className=\"cuadricula-articulos__item box-shadow-1\">\n            <a className=\"item-link a-limpio\" href={\"/comprar/\"+props.idp+\"/\"+props.url} >\n                <img className=\"articulo__img\" src={\"data:image/*;base64,\"+props.img} alt=\"Imagen\" />\n\t\t\t\t<div className=\"item-info\"> \n\t\t\t\t\t<span className=\"articulo__precio dblock\">{props.precio}</span>\n\t\t\t\t\t<div className=\"articulo__separador\"></div>\n\t\t\t\t\t<span className=\"articulo__titulo dblock\">{props.titulo}</span>\n\t\t\t\t</div>\n            </a>\n\t\t\t{/* <div className=\"articulo__boton-comprar dflex\">\n\t\t\t\t<span className=\"agregar-carrito cursor-pointer\">\n\t\t\t\t\t<i className=\"fas fa-shopping-cart\"></i>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"link-menu-agregar cursor-pointer box-shadow-1\"\n\t\t\t\t\t\tonClick={e => agregarCarrito(props.idp)}>\n\t\t\t\t\t\tAgregar al carrito\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<a className=\"comprar-articulo dblock a-limpio\" href={\"/pago/\"+props.idp}>\n\t\t\t\t\tCOMPRAR\n\t\t\t\t</a>\n\t\t\t</div> */}\n        </div>\n    )\n}\n\nconst Galeria = (props) => {\n    const [listado, setListado] = useState([]);\n    const [busqueda, setBusqueda] = useState(true);\n    const [error, setError] = useState(false);\n    const [usr, setUsr] = useState(null);\n\n\tlet { categoria, busqueda_query } = useParams();\n\n\tlet usr_tmp = useSelector(state => state.usuario);\n\tif(usr_tmp && !usr) setUsr(usr_tmp);\n\n    useEffect(() => {\n        if(busqueda){ \n\t\t\tlet url = baseURL + inicioURL;\n\t\t\tif(categoria) {\n\t\t\t\turl += \"?categoria=\" + categoria;\n\t\t\t}\n\t\t\telse if(busqueda_query) {\n\t\t\t\turl += \"?busqueda=\" + busqueda_query;\n\t\t\t}\n\t\t\taxios.get(url)\n\t\t\t.then(res => {\n\t\t\t\tsetListado(res.data);\n\t\t\t\tsetBusqueda(false);\n\t\t\t\tsetError(false);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tsetError(true);\n\t\t\t})\n\t\t};\n    }, [listado, busqueda]); \n\n\tif(error) return( <div className=\"talign-center\">No se pudo conectar con el servidor.</div>)\n\telse if(busqueda && !error) return(<div className=\"div-cargando\"/>)\n\telse if(!busqueda && !error && listado.length === 0) \n\t\treturn(<div className=\"talign-center\">\n\t\t\t{busqueda_query && \"No hay publicaciones que coincidan con la busqueda \\\"\" + busqueda_query + \"\\\".\"}\n\t\t\t{!busqueda_query && \n\t\t\t<>\n\t\t\t\t<div>\n\t\t\t\t\t<div style={{marginBottom: \"4em\"}}></div>\n\t\t\t\t\t<div className=\"gris-mas-oscuro\" style={{fontSize: \"3rem\", marginBottom: \"2em\"}}>{\"Todav\\u00eda no hay publicaciones...\"}</div>\n\t\t\t\t\t<a className=\"a-limpio2\" href=\"/vender\" style={{fontSize: \"1.5rem\", color: \"var(--color-principal)\"}}>{\"\\u00a1S\\u00e9 el primero en crear una publicaci\\u00f3n!\"}</a>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t\t}\n\t\t</div>)\n\n    return(\n        <div className=\"galeria-articulos-view\" >\n\t\t\t<div className=\"cuadricula-articulos\">\n\t\t\t\t{listado.map(item => \n\t\t\t\t\t{\n\t\t\t\t\t\tlet titulo = deshex(item.titulo);\n\t\t\t\t\t\treturn(<Articulo\n\t\t\t\t\t\tidp={item.id}\n\t\t\t\t\t\turl={item.url}\n\t\t\t\t\t\tdataid={usr ? usr.dataId : null}\n\t\t\t\t\t\ttitulo={titulo.substring(0, Math.min(60, titulo.length)) + \"...\"}\n\t\t\t\t\t\tprecio={\"$\"+item.precio} \n\t\t\t\t\t\timg={arrayBase64(item.imagenes[0].bytes)} />)\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t</div>\n        </div>\n    )\n}\n\nexport default Galeria;\n"]},"metadata":{},"sourceType":"module"}