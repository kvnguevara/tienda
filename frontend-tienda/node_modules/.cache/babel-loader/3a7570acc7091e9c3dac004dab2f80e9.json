{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kevin\\\\Desktop\\\\Tienda\\\\frontend-tienda\\\\src\\\\componentes\\\\Vender.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './Vender.css';\n/* axios */\n\nimport axios from \"axios\";\n/* datos */\n\nimport { categorias, baseURL, publicarURL, verArticuloURL, hex, deshex, arrayBase64, base64Archivo, Redirigir } from \"../datos\";\n/* react-router-dom */\n\nimport { useParams } from \"react-router-dom\";\nimport { Camera } from \"react-bootstrap-icons\";\n/* material ui */\n\nimport Paper from '@material-ui/core/Paper';\nimport { XCircle } from \"react-bootstrap-icons\";\nimport { useRef } from 'react';\n/*  usado para comprobar si los campos fueron editados al menos una vez\n    antes de mostrar errores en la validacion */\n\nconst camposActivados = {\n  categoria: false,\n  titulo: false,\n  descripcion: false,\n  precio: false,\n  cantidad: false,\n  fotos: false\n};\n\nconst Vender = props => {\n  const [mostrar, setMostrar] = useState(false);\n  const [paso, setPaso] = useState(0);\n  const [id, setId] = useState(null);\n  const [titulo, setTitulo] = useState(\"\");\n  const [descripcion, setDescripcion] = useState(\"\");\n  const [categoria, setCategoria] = useState(\"-1\");\n  const [precio, setPrecio] = useState(\"\");\n  const [cantidad, setCantidad] = useState(1);\n  const [envio, setEnvio] = useState(true);\n  const [fotos, setFotos] = useState([]);\n  const [uris, setUris] = useState([]);\n  const [excedido, setExcedido] = useState(false);\n  const [error, setError] = useState(false);\n  /* se usa pura y exclusivamente para forzar un re-renderizado (?) */\n\n  const [_, setErrores] = useState(false);\n  const {\n    idpublicacion\n  } = useParams();\n  useEffect(_ => {\n    if (idpublicacion) {\n      let url = baseURL + verArticuloURL + \"/\" + idpublicacion;\n      axios.get(url).then(res => {\n        let p = res.data;\n        setId(p.id);\n        setTitulo(deshex(p.titulo));\n        setDescripcion(deshex(p.descripcion));\n        setCategoria(p.categoria);\n        setPrecio(p.precio);\n        setCantidad(p.cantidad);\n\n        for (let k = 0; k < p.imagenes.length; k++) {\n          let dataurl = \"data:image/*;base64,\" + arrayBase64(p.imagenes[k].bytes);\n          setUris(uris => [...uris, dataurl]);\n          let ff = base64Archivo(dataurl, \"foto\" + k);\n          setFotos(fotos => [...fotos, ff]);\n        }\n\n        setMostrar(true);\n      }).catch(err => {\n        console.log(err);\n        setError(true);\n      });\n    } else setMostrar(true);\n  }, []);\n  /* titulos de los pasos */\n\n  const titulos = ['Seleccion\\u00e1 la categor\\u00eda del producto', 'Indic\\u00e1 un t\\u00edtulo y una descripci\\u00f3n', 'Establece el precio y la cantidad disponible', 'Agreg\\u00e1 fotos del producto', 'Publicar'];\n  /* nombres de los pasos */\n\n  const pasos = ['Categor\\u00eda', 'T\\u00edtulo y descripci\\u00f3n', 'Precio y cantidad', 'Fotos', 'Publicar'];\n  /* funcion para avanzar o retroceder */\n\n  const mover = direccion => {\n    let hayErrores = false;\n\n    if (direccion === 1) {\n      switch (paso) {\n        case 0:\n          hayErrores = categoria === \"-1\";\n          camposActivados.categoria = categoria === \"-1\";\n          break;\n\n        case 1:\n          hayErrores = titulo === \"\" || descripcion === \"\";\n          camposActivados.titulo = titulo === \"\";\n          camposActivados.descripcion = descripcion === \"\";\n          break;\n\n        case 2:\n          if (precio === \"\") setPrecio(\"0\");\n          if (cantidad === \"\") setCantidad(\"1\");\n          break;\n\n        case 3:\n          hayErrores = uris.length === 0;\n          camposActivados.fotos = uris.length === 0;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    setErrores(hayErrores);\n    if (hayErrores) return;\n\n    if (paso === pasos.length - 1 && direccion > 0) {\n      finalizarPublicacion();\n      return;\n    }\n\n    if (paso + direccion < 0 || paso + direccion >= pasos.length) return;\n    setPaso(paso + direccion);\n    document.body.scrollTop = 0;\n    document.documentElement.scrollTop = 0;\n  };\n  /* funcion para subir imagenes del producto, en el paso \"Fotos\" */\n\n\n  const cargarFotos = e => {\n    if (e.target.files) {\n      setExcedido(e.target.files.length + uris.length > 7);\n      if (e.target.files.length + uris.length <= 7) for (let i = 0; i < e.target.files.length; i++) {\n        let item = e.target.files[i];\n\n        if (item.size >= 1048576) {\n          console.log(\"El archivo debe ser menor a 1MB.\");\n          continue;\n        }\n\n        let filereader = new FileReader();\n\n        filereader.onload = ev => {\n          setUris(uris => [...uris, ev.target.result]);\n          setFotos(fotos => [...fotos, item]);\n        };\n\n        filereader.readAsDataURL(e.target.files[i]);\n      }\n    }\n\n    if (props.onChange !== undefined) props.onChange(e);\n  };\n  /* miniaturas de vista previa de las fotos subidas en el paso \"Fotos\" */\n\n\n  const Miniatura = () => {\n    let imgTag = null;\n\n    if (uris.length > 0) {\n      imgTag = [];\n      uris.map((item, i) => {\n        imgTag.push( /*#__PURE__*/React.createElement(\"div\", {\n          className: \"publicacion-foto\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"img\",\n          src: item,\n          alt: \"Imagen\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"btn-eliminar\",\n          atr: i,\n          onClick: e => borrarImagen(e),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(XCircle, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }\n        }))));\n      });\n    }\n\n    return imgTag;\n  };\n  /* arreglo de miniaturas */\n\n\n  const min = Miniatura();\n  /* funcion del boton X que se muestra en el centro de las miniaturas, al asomar el mouse */\n\n  const borrarImagen = e => {\n    let at = e.currentTarget.getAttribute(\"atr\");\n    setUris(uris => uris.filter((item, i) => i != at));\n    setFotos(fotos => fotos.filter((item, i) => i != at)); //setUris(uris.filter((item, i) => i != at));\n\n    setExcedido(excedido.length > 7);\n  };\n\n  function urlRepresentativo(s) {\n    const permitidos = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n    let str = s;\n\n    while (str.includes(\"  \")) str = str.replaceAll(\"  \", \" \");\n\n    for (let k = 0; k <= str.length; k++) {\n      let c = str.charAt(k);\n      if (!permitidos.includes(c.toLowerCase())) str = str.replaceAll(c, \"-\");\n    }\n\n    while (str.includes(\"--\")) str = str.replaceAll(\"--\", \"-\");\n\n    return str;\n  }\n\n  function finalizarPublicacion() {\n    let usr_dataid = props.dataId;\n    const imgData = new FormData();\n    if (id) imgData.append(\"id\", id);\n    imgData.append(\"data_id\", usr_dataid);\n    imgData.append(\"categoria\", categoria);\n    imgData.append(\"titulo\", hex(titulo));\n    imgData.append(\"url\", urlRepresentativo(titulo));\n    imgData.append(\"descripcion\", hex(descripcion));\n    imgData.append(\"precio\", precio);\n    imgData.append(\"cantidad\", cantidad.toString());\n    imgData.append(\"envios\", envio ? \"1\" : \"0\");\n\n    for (let i = 0; i < fotos.length; i++) {\n      imgData.append(\"foto\", fotos[i]);\n    }\n\n    axios.post(baseURL + publicarURL, imgData).then(res => {\n      if (res.data == \"0\") {\n        console.log(res);\n        setPaso(-1);\n      } else console.log(res.data);\n    }).catch(err => console.log(err));\n  }\n\n  const Categoria = props => {\n    let ref = useRef();\n\n    const catClick = e => {\n      let cn = ref.current.getAttribute(\"catnum\"); //  setCategoria(cn);\n\n      setCategoria(props.catnum);\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: categoria === props.catnum ? \"categoria-vender seleccionado dflex border-box box-shadow-1\" : \"categoria-vender dflex border-box box-shadow-1\",\n      catnum: props.catnum,\n      ref: ref,\n      onClick: e => catClick(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subcontenedor dflex pointer-events-none user-select-none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"categoria-icono pointer-events-none user-select-none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, props.datos.icono), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"categoria-titulo pointer-events-none user-select-none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, props.datos.titulo)));\n  };\n\n  const ConfirmacionPublicacion = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 5\n      }\n    }, \"\\u00a1Publicaci\\u00f3n realizada con \\u00e9xito!\"));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, error && /*#__PURE__*/React.createElement(Redirigir, {\n    donde: \"/error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }), !error && paso === -1 && /*#__PURE__*/React.createElement(ConfirmacionPublicacion, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 29\n    }\n  }), !error && mostrar && paso !== -1 && /*#__PURE__*/React.createElement(Paper, {\n    className: \"vender-articulo-view\",\n    elevation: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"titulos-etapas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"vender-articulo-titulo titulo-1 gris-oscuro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, titulos[paso])), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }, paso === 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"categorias-contenedor talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  }, categorias.map(item => /*#__PURE__*/React.createElement(Categoria, {\n    datos: item,\n    catnum: item.categoria,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 49\n    }\n  }))), /*#__PURE__*/React.createElement(\"small\", {\n    className: categoria === \"-1\" && camposActivados.categoria ? \"validacion-error\" : \"validacion-error invisible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, \"Eleg\\u00ed una categor\\u00eda adecuada para tu publicaci\\u00f3n\")), paso === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"titulo-publicacion-contenedor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 25\n    }\n  }, \"T\\u00edtulo de la publicaci\\u00f3n\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"n-textfield width100\",\n    label: \"T\\u00edtulo\",\n    variant: \"outlined\",\n    value: titulo,\n    onChange: e => {\n      camposActivados.titulo = true;\n      setTitulo(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: titulo === \"\" && camposActivados.titulo ? \"validacion-error\" : \"validacion-error invisible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, \"Escrib\\u00ed un t\\u00edtulo para tu publicaci\\u00f3n\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"descripcion-publicacion-contenedor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }, \"Escriba una descripci\\u00f3n\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"n-textarea width100\",\n    rows: \"5\",\n    value: descripcion,\n    onChange: e => {\n      setDescripcion(e.target.value);\n      camposActivados.descripcion = true;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: descripcion === \"\" && camposActivados.descripcion ? \"validacion-error\" : \"validacion-error invisible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 25\n    }\n  }, \"Escrib\\u00ed una descripci\\u00f3n para tu publicaci\\u00f3n\"))), paso === 2 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"precio-cantidad-publicacion-contenedor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"precio-cantidad-publicacion__precio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__label dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 29\n    }\n  }, \"Establece un precio: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"n-textfield width100 xhx\",\n    label: \"Precio\",\n    value: precio,\n    type: \"number\",\n    onChange: e => {\n      setPrecio(e.target.value);\n      camposActivados.precio = true;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"precio-cantidad-publicacion__cantidad\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__label dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 29\n    }\n  }, \"\\u00bfQu\\u00e9 cantidad dispon\\u00e9s?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"n-textfield width100\",\n    label: \"Cantidad\",\n    value: cantidad,\n    type: \"number\",\n    onChange: e => {\n      setCantidad(e.target.value);\n      camposActivados.cantidad = true;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__label dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 25\n    }\n  }, \"Forma de env\\u00edo:\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"n-select\",\n    onChange: e => setEnvio(e.target.value.includes(\"Envio\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    className: \"opt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 8\n    }\n  }, \"Envio a domicilio\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"opt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 8\n    }\n  }, \"Retiro en el local\")))), paso === 3 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fotos-publicacion-contenedor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"talign-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"subir-fotos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"AAwTrket449EAAmd\",\n    className: \"button dinline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"vender-articulo__bot-agregar-fotos n-boton dflex pointer-events-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sp-icono pointer-events-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Camera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 92\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sp-label pointer-events-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 45\n    }\n  }, \"Agregar fotos\"))), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"dnone\",\n    id: \"AAwTrket449EAAmd\",\n    type: \"file\",\n    accept: \"image/*\",\n    multiple: true,\n    onChange: e => {\n      cargarFotos(e);\n      camposActivados.fotos = true;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: !excedido ? \"limite-excedido invisible dblock\" : \"limite-excedido dblock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 33\n    }\n  }, \"\\u00a1M\\u00e1ximo 7 fotos!\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: uris.length === 0 && camposActivados.fotos ? \"validacion-error\" : \"validacion-error invisible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 33\n    }\n  }, \"Agreg\\u00e1 al menos una foto para tu publicaci\\u00f3n\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-fotos-publicacion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 33\n    }\n  }, min))))), paso === 4 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-publicacion-contenedor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"finalizar-campo__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 29\n    }\n  }, \"Titulo: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"finalizar-campo__valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 29\n    }\n  }, titulo)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"finalizar-campo__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 29\n    }\n  }, \"Descripcion: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"finalizar-campo__valor\",\n    style: {\n      whiteSpace: \"pre-wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 29\n    }\n  }, descripcion)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"finalizar-campo__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 29\n    }\n  }, \"Precio: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"finalizar-campo__valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 29\n    }\n  }, \"$\" + Number(precio))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"finalizar-campo__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 29\n    }\n  }, \"Cantidad disponible: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"finalizar-campo__valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 29\n    }\n  }, cantidad)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finalizar-campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"finalizar-campo__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 29\n    }\n  }, \"Envios: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"finalizar-campo__valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 29\n    }\n  }, envio ? \"Envio a domicilio\" : \"Solo retiro en local\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navegacion-pasos dflex justify-sb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: paso === 0 ? \"invisible n-boton\" : \"n-boton\",\n    style: {\n      width: 140\n    },\n    onClick: e => mover(-1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 17\n    }\n  }, \"Anterior\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"publicacion-steeper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"n-boton\",\n    style: {\n      width: 140\n    },\n    onClick: e => mover(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 17\n    }\n  }, paso === 4 ? \"Finalizar\" : \"Siguiente\"))));\n};\n\nexport default Vender;","map":{"version":3,"sources":["C:/Users/kevin/Desktop/Tienda/frontend-tienda/src/componentes/Vender.jsx"],"names":["React","useState","useEffect","axios","categorias","baseURL","publicarURL","verArticuloURL","hex","deshex","arrayBase64","base64Archivo","Redirigir","useParams","Camera","Paper","XCircle","useRef","camposActivados","categoria","titulo","descripcion","precio","cantidad","fotos","Vender","props","mostrar","setMostrar","paso","setPaso","id","setId","setTitulo","setDescripcion","setCategoria","setPrecio","setCantidad","envio","setEnvio","setFotos","uris","setUris","excedido","setExcedido","error","setError","_","setErrores","idpublicacion","url","get","then","res","p","data","k","imagenes","length","dataurl","bytes","ff","catch","err","console","log","titulos","pasos","mover","direccion","hayErrores","finalizarPublicacion","document","body","scrollTop","documentElement","cargarFotos","e","target","files","i","item","size","filereader","FileReader","onload","ev","result","readAsDataURL","onChange","undefined","Miniatura","imgTag","map","push","borrarImagen","min","at","currentTarget","getAttribute","filter","urlRepresentativo","s","permitidos","str","includes","replaceAll","c","charAt","toLowerCase","usr_dataid","dataId","imgData","FormData","append","toString","post","Categoria","ref","catClick","cn","current","catnum","datos","icono","ConfirmacionPublicacion","value","whiteSpace","Number","width"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,cAAP;AAEA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;;AACA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,WAA9B,EAA2CC,cAA3C,EAA2DC,GAA3D,EAAgEC,MAAhE,EAAwEC,WAAxE,EAAqFC,aAArF,EAAoGC,SAApG,QAAqH,UAArH;AAEA;;AACA,SAASC,SAAT,QAA0B,kBAA1B;AAEA,SAASC,MAAT,QAAuB,uBAAvB;AAEA;;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AAEA,SACIC,OADJ,QACmB,uBADnB;AAEA,SAASC,MAAT,QAAuB,OAAvB;AAEA;;;AAEA,MAAMC,eAAe,GAAG;AACpBC,EAAAA,SAAS,EAAE,KADS;AAEpBC,EAAAA,MAAM,EAAE,KAFY;AAGpBC,EAAAA,WAAW,EAAE,KAHO;AAIpBC,EAAAA,MAAM,EAAE,KAJY;AAKpBC,EAAAA,QAAQ,EAAE,KALU;AAMpBC,EAAAA,KAAK,EAAE;AANa,CAAxB;;AASA,MAAMC,MAAM,GAAIC,KAAD,IAAW;AACzB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB3B,QAAQ,CAAC,KAAD,CAAtC;AAEG,QAAM,CAAC4B,IAAD,EAAOC,OAAP,IAAkB7B,QAAQ,CAAC,CAAD,CAAhC;AACH,QAAM,CAAC8B,EAAD,EAAKC,KAAL,IAAc/B,QAAQ,CAAC,IAAD,CAA5B;AACG,QAAM,CAACmB,MAAD,EAASa,SAAT,IAAsBhC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACoB,WAAD,EAAca,cAAd,IAAgCjC,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACkB,SAAD,EAAYgB,YAAZ,IAA4BlC,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACqB,MAAD,EAASc,SAAT,IAAsBnC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACsB,QAAD,EAAWc,WAAX,IAA0BpC,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACqC,KAAD,EAAQC,QAAR,IAAoBtC,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACuB,KAAD,EAAQgB,QAAR,IAAoBvC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACwC,IAAD,EAAOC,OAAP,IAAkBzC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC0C,QAAD,EAAWC,WAAX,IAA0B3C,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC4C,KAAD,EAAQC,QAAR,IAAoB7C,QAAQ,CAAC,KAAD,CAAlC;AACA;;AACA,QAAM,CAAC8C,CAAD,EAAIC,UAAJ,IAAkB/C,QAAQ,CAAC,KAAD,CAAhC;AAEH,QAAM;AAAEgD,IAAAA;AAAF,MAAoBpC,SAAS,EAAnC;AAEAX,EAAAA,SAAS,CAAE6C,CAAC,IAAI;AACf,QAAGE,aAAH,EAAkB;AACjB,UAAIC,GAAG,GAAG7C,OAAO,GAAGE,cAAV,GAA2B,GAA3B,GAAiC0C,aAA3C;AACA9C,MAAAA,KAAK,CAACgD,GAAN,CAAUD,GAAV,EACCE,IADD,CACMC,GAAG,IAAI;AACZ,YAAIC,CAAC,GAAGD,GAAG,CAACE,IAAZ;AACAvB,QAAAA,KAAK,CAACsB,CAAC,CAACvB,EAAH,CAAL;AACAE,QAAAA,SAAS,CAACxB,MAAM,CAAC6C,CAAC,CAAClC,MAAH,CAAP,CAAT;AACAc,QAAAA,cAAc,CAACzB,MAAM,CAAC6C,CAAC,CAACjC,WAAH,CAAP,CAAd;AACAc,QAAAA,YAAY,CAACmB,CAAC,CAACnC,SAAH,CAAZ;AACAiB,QAAAA,SAAS,CAACkB,CAAC,CAAChC,MAAH,CAAT;AACAe,QAAAA,WAAW,CAACiB,CAAC,CAAC/B,QAAH,CAAX;;AACA,aAAI,IAAIiC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAACG,QAAF,CAAWC,MAAzB,EAAgCF,CAAC,EAAjC,EAAoC;AACnC,cAAIG,OAAO,GAAG,yBAAuBjD,WAAW,CAAC4C,CAAC,CAACG,QAAF,CAAWD,CAAX,EAAcI,KAAf,CAAhD;AACAlB,UAAAA,OAAO,CAAED,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAUkB,OAAV,CAAX,CAAP;AACA,cAAIE,EAAE,GAAGlD,aAAa,CAACgD,OAAD,EAAU,SAAOH,CAAjB,CAAtB;AACehB,UAAAA,QAAQ,CAAChB,KAAK,IAAI,CAAC,GAAGA,KAAJ,EAAWqC,EAAX,CAAV,CAAR;AACf;;AACDjC,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA,OAhBD,EAiBCkC,KAjBD,CAiBOC,GAAG,IAAI;AACDC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAjB,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACH,OApBV;AAqBA,KAvBD,MAwBKlB,UAAU,CAAC,IAAD,CAAV;AACL,GA1BQ,EA0BN,EA1BM,CAAT;AA4BG;;AACA,QAAMsC,OAAO,GAAG,CACZ,gDADY,EAEZ,mDAFY,EAGZ,8CAHY,EAIZ,gCAJY,EAKZ,UALY,CAAhB;AAQA;;AACA,QAAMC,KAAK,GAAG,CACV,gBADU,EAEV,gCAFU,EAGV,mBAHU,EAIV,OAJU,EAKV,UALU,CAAd;AAQA;;AACA,QAAMC,KAAK,GAAGC,SAAS,IAAI;AACvB,QAAIC,UAAU,GAAG,KAAjB;;AACA,QAAGD,SAAS,KAAK,CAAjB,EAAoB;AAChB,cAAOxC,IAAP;AACI,aAAK,CAAL;AACIyC,UAAAA,UAAU,GAAGnD,SAAS,KAAK,IAA3B;AACAD,UAAAA,eAAe,CAACC,SAAhB,GAA4BA,SAAS,KAAK,IAA1C;AACA;;AACJ,aAAK,CAAL;AACImD,UAAAA,UAAU,GAAGlD,MAAM,KAAK,EAAX,IAAiBC,WAAW,KAAK,EAA9C;AACAH,UAAAA,eAAe,CAACE,MAAhB,GAAyBA,MAAM,KAAK,EAApC;AACAF,UAAAA,eAAe,CAACG,WAAhB,GAA8BA,WAAW,KAAK,EAA9C;AACA;;AACJ,aAAK,CAAL;AACI,cAAGC,MAAM,KAAK,EAAd,EAAkBc,SAAS,CAAC,GAAD,CAAT;AAClB,cAAGb,QAAQ,KAAK,EAAhB,EAAoBc,WAAW,CAAC,GAAD,CAAX;AACpB;;AACJ,aAAK,CAAL;AACIiC,UAAAA,UAAU,GAAG7B,IAAI,CAACiB,MAAL,KAAgB,CAA7B;AACAxC,UAAAA,eAAe,CAACM,KAAhB,GAAwBiB,IAAI,CAACiB,MAAL,KAAgB,CAAxC;AACA;;AACJ;AAAS;AAlBb;AAoBH;;AACDV,IAAAA,UAAU,CAACsB,UAAD,CAAV;AACA,QAAGA,UAAH,EAAe;;AAErB,QAAGzC,IAAI,KAAKsC,KAAK,CAACT,MAAN,GAAe,CAAxB,IAA6BW,SAAS,GAAG,CAA5C,EAA+C;AAACE,MAAAA,oBAAoB;AAAI;AAAQ;;AAChF,QAAG1C,IAAI,GAAGwC,SAAP,GAAmB,CAAnB,IAAwBxC,IAAI,GAAGwC,SAAP,IAAoBF,KAAK,CAACT,MAArD,EAA6D;AACvD5B,IAAAA,OAAO,CAACD,IAAI,GAAGwC,SAAR,CAAP;AACAG,IAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,GAA0B,CAA1B;AACAF,IAAAA,QAAQ,CAACG,eAAT,CAAyBD,SAAzB,GAAqC,CAArC;AACH,GAhCD;AAkCA;;;AACA,QAAME,WAAW,GAAIC,CAAD,IAAO;AACvB,QAAGA,CAAC,CAACC,MAAF,CAASC,KAAZ,EAAkB;AACdnC,MAAAA,WAAW,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAerB,MAAf,GAAwBjB,IAAI,CAACiB,MAA7B,GAAsC,CAAvC,CAAX;AACA,UAAGmB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAerB,MAAf,GAAwBjB,IAAI,CAACiB,MAA7B,IAAuC,CAA1C,EACI,KAAI,IAAIsB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGH,CAAC,CAACC,MAAF,CAASC,KAAT,CAAerB,MAAlC,EAA0CsB,CAAC,EAA3C,EACA;AACI,YAAIC,IAAI,GAAGJ,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,CAAf,CAAX;;AACA,YAAGC,IAAI,CAACC,IAAL,IAAa,OAAhB,EACA;AACIlB,UAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACA;AACH;;AAED,YAAIkB,UAAU,GAAG,IAAIC,UAAJ,EAAjB;;AACAD,QAAAA,UAAU,CAACE,MAAX,GAAqBC,EAAD,IAAQ;AACxB5C,UAAAA,OAAO,CAAED,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAU6C,EAAE,CAACR,MAAH,CAAUS,MAApB,CAAX,CAAP;AACA/C,UAAAA,QAAQ,CAAChB,KAAK,IAAI,CAAC,GAAGA,KAAJ,EAAWyD,IAAX,CAAV,CAAR;AACH,SAHD;;AAIAE,QAAAA,UAAU,CAACK,aAAX,CAAyBX,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,CAAf,CAAzB;AACH;AACR;;AACD,QAAItD,KAAK,CAAC+D,QAAN,KAAmBC,SAAvB,EACIhE,KAAK,CAAC+D,QAAN,CAAeZ,CAAf;AACP,GAvBD;AAyBA;;;AACA,QAAMc,SAAS,GAAG,MAAM;AACpB,QAAIC,MAAM,GAAG,IAAb;;AACA,QAAInD,IAAI,CAACiB,MAAL,GAAc,CAAlB,EAAqB;AACjBkC,MAAAA,MAAM,GAAG,EAAT;AACAnD,MAAAA,IAAI,CAACoD,GAAL,CAAS,CAACZ,IAAD,EAAOD,CAAP,KAAa;AAClBY,QAAAA,MAAM,CAACE,IAAP,eACI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAqB,UAAA,GAAG,EAAEb,IAA1B;AAAgC,UAAA,GAAG,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,eAEI;AACI,UAAA,SAAS,EAAC,cADd;AAEI,UAAA,GAAG,EAAED,CAFT;AAGI,UAAA,OAAO,EAAGH,CAAD,IAAOkB,YAAY,CAAClB,CAAD,CAHhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAII,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJJ,CAFJ,CADJ;AAWH,OAZD;AAaH;;AACD,WAAOe,MAAP;AACH,GAnBD;AAqBA;;;AACA,QAAMI,GAAG,GAAGL,SAAS,EAArB;AAEA;;AACA,QAAMI,YAAY,GAAIlB,CAAD,IAAO;AACxB,QAAIoB,EAAE,GAAGpB,CAAC,CAACqB,aAAF,CAAgBC,YAAhB,CAA6B,KAA7B,CAAT;AACAzD,IAAAA,OAAO,CAAED,IAAD,IAAUA,IAAI,CAAC2D,MAAL,CAAY,CAACnB,IAAD,EAAOD,CAAP,KAAaA,CAAC,IAAIiB,EAA9B,CAAX,CAAP;AACAzD,IAAAA,QAAQ,CAAEhB,KAAD,IAAWA,KAAK,CAAC4E,MAAN,CAAa,CAACnB,IAAD,EAAOD,CAAP,KAAaA,CAAC,IAAIiB,EAA/B,CAAZ,CAAR,CAHwB,CAIxB;;AACArD,IAAAA,WAAW,CAACD,QAAQ,CAACe,MAAT,GAAkB,CAAnB,CAAX;AACH,GAND;;AAQA,WAAS2C,iBAAT,CAA2BC,CAA3B,EAA8B;AACjC,UAAMC,UAAU,GAAG,sCAAnB;AACA,QAAIC,GAAG,GAAGF,CAAV;;AACA,WAAME,GAAG,CAACC,QAAJ,CAAa,IAAb,CAAN,EAA0BD,GAAG,GAAGA,GAAG,CAACE,UAAJ,CAAe,IAAf,EAAqB,GAArB,CAAN;;AAC1B,SAAI,IAAIlD,CAAC,GAAC,CAAV,EAAaA,CAAC,IAAEgD,GAAG,CAAC9C,MAApB,EAA2BF,CAAC,EAA5B,EAAgC;AAC5B,UAAImD,CAAC,GAAGH,GAAG,CAACI,MAAJ,CAAWpD,CAAX,CAAR;AACA,UAAG,CAAC+C,UAAU,CAACE,QAAX,CAAoBE,CAAC,CAACE,WAAF,EAApB,CAAJ,EAA0CL,GAAG,GAAGA,GAAG,CAACE,UAAJ,CAAeC,CAAf,EAAkB,GAAlB,CAAN;AAC1C;;AACD,WAAMH,GAAG,CAACC,QAAJ,CAAa,IAAb,CAAN,EAA0BD,GAAG,GAAGA,GAAG,CAACE,UAAJ,CAAe,IAAf,EAAqB,GAArB,CAAN;;AAC7B,WAAOF,GAAP;AACI;;AAED,WAASjC,oBAAT,GAAgC;AAC5B,QAAIuC,UAAU,GAAGpF,KAAK,CAACqF,MAAvB;AACA,UAAMC,OAAO,GAAG,IAAIC,QAAJ,EAAhB;AACN,QAAGlF,EAAH,EAAOiF,OAAO,CAACE,MAAR,CAAe,IAAf,EAAqBnF,EAArB;AACDiF,IAAAA,OAAO,CAACE,MAAR,CAAe,SAAf,EAA0BJ,UAA1B;AACAE,IAAAA,OAAO,CAACE,MAAR,CAAe,WAAf,EAA4B/F,SAA5B;AACA6F,IAAAA,OAAO,CAACE,MAAR,CAAe,QAAf,EAAyB1G,GAAG,CAACY,MAAD,CAA5B;AACA4F,IAAAA,OAAO,CAACE,MAAR,CAAe,KAAf,EAAsBb,iBAAiB,CAACjF,MAAD,CAAvC;AACA4F,IAAAA,OAAO,CAACE,MAAR,CAAe,aAAf,EAA8B1G,GAAG,CAACa,WAAD,CAAjC;AACA2F,IAAAA,OAAO,CAACE,MAAR,CAAe,QAAf,EAAyB5F,MAAzB;AACA0F,IAAAA,OAAO,CAACE,MAAR,CAAe,UAAf,EAA2B3F,QAAQ,CAAC4F,QAAT,EAA3B;AACAH,IAAAA,OAAO,CAACE,MAAR,CAAe,QAAf,EAAyB5E,KAAK,GAAG,GAAH,GAAS,GAAvC;;AACA,SAAI,IAAI0C,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGxD,KAAK,CAACkC,MAAzB,EAAiCsB,CAAC,EAAlC,EAAsC;AAClCgC,MAAAA,OAAO,CAACE,MAAR,CAAe,MAAf,EAAuB1F,KAAK,CAACwD,CAAD,CAA5B;AACH;;AACD7E,IAAAA,KAAK,CAACiH,IAAN,CAAW/G,OAAO,GAAGC,WAArB,EAAkC0G,OAAlC,EAA2C5D,IAA3C,CAAgDC,GAAG,IAAI;AAC5D,UAAGA,GAAG,CAACE,IAAJ,IAAY,GAAf,EAAoB;AACnBS,QAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AACAvB,QAAAA,OAAO,CAAC,CAAC,CAAF,CAAP;AACS,OAHV,MAIckC,OAAO,CAACC,GAAR,CAAYZ,GAAG,CAACE,IAAhB;AACR,KAND,EAOCO,KAPD,CAOOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPd;AAQH;;AAED,QAAMsD,SAAS,GAAI3F,KAAD,IAAW;AACzB,QAAI4F,GAAG,GAAGrG,MAAM,EAAhB;;AACA,UAAMsG,QAAQ,GAAI1C,CAAD,IAAO;AACpB,UAAI2C,EAAE,GAAGF,GAAG,CAACG,OAAJ,CAAYtB,YAAZ,CAAyB,QAAzB,CAAT,CADoB,CAEpB;;AACAhE,MAAAA,YAAY,CAACT,KAAK,CAACgG,MAAP,CAAZ;AACH,KAJD;;AAMA,wBACI;AACI,MAAA,SAAS,EAAEvG,SAAS,KAAKO,KAAK,CAACgG,MAApB,GAA6B,6DAA7B,GACI,gDAFnB;AAGI,MAAA,MAAM,EAAEhG,KAAK,CAACgG,MAHlB;AAII,MAAA,GAAG,EAAEJ,GAJT;AAKI,MAAA,OAAO,EAAGzC,CAAD,IAAO0C,QAAQ,CAAC1C,CAAD,CAL5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMI;AAAK,MAAA,SAAS,EAAC,0DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,SAAS,EAAC,sDAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwEnD,KAAK,CAACiG,KAAN,CAAYC,KAApF,CADJ,eAEI;AAAM,MAAA,SAAS,EAAC,uDAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyElG,KAAK,CAACiG,KAAN,CAAYvG,MAArF,CAFJ,CANJ,CADJ;AAaH,GArBD;;AAuBH,QAAMyG,uBAAuB,GAAG,MAAM;AACrC,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,kDAAL,CADD,CADD;AAKA,GAND;;AAQG,sBACF,0CACOhF,KAAK,iBAAI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADhB,EAEC,CAACA,KAAD,IAAUhB,IAAI,KAAK,CAAC,CAApB,iBAAyB,oBAAC,uBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAF1B,EAGC,CAACgB,KAAD,IAAUlB,OAAV,IAAqBE,IAAI,KAAK,CAAC,CAA/B,iBAAoC,oBAAC,KAAD;AAC3B,IAAA,SAAS,EAAC,sBADiB;AAE3B,IAAA,SAAS,EAAE,CAFgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAG3B;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,6CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKqC,OAAO,CAACrC,IAAD,CADZ,CADJ,CAH2B,eAQ3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEKA,IAAI,KAAK,CAAT,iBAAc,uDAEX;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKzB,UAAU,CAACyF,GAAX,CAAeZ,IAAI,iBAAI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEA,IAAlB;AAAwB,IAAA,MAAM,EAAEA,IAAI,CAAC9D,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAvB,CADL,CAFW,eAKX;AACI,IAAA,SAAS,EAAEA,SAAS,KAAK,IAAd,IAAsBD,eAAe,CAACC,SAAtC,GAAkD,kBAAlD,GAAuE,4BADtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK,iEAFL,CALW,CAFnB,EAcKU,IAAI,KAAK,CAAT,iBACD,uDACI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmB,oCAAnB,CADJ,eAEI;AACI,IAAA,SAAS,EAAC,sBADd;AAEI,IAAA,KAAK,EAAE,aAFX;AAGI,IAAA,OAAO,EAAC,UAHZ;AAII,IAAA,KAAK,EAAET,MAJX;AAKI,IAAA,QAAQ,EAAGyD,CAAD,IAAO;AACb3D,MAAAA,eAAe,CAACE,MAAhB,GAAyB,IAAzB;AACAa,MAAAA,SAAS,CAAC4C,CAAC,CAACC,MAAF,CAASgD,KAAV,CAAT;AACH,KARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAWI;AACI,IAAA,SAAS,EAAE1G,MAAM,KAAK,EAAX,IAAiBF,eAAe,CAACE,MAAjC,GAA0C,kBAA1C,GAA+D,4BAD9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK,sDAFL,CAXJ,CADJ,eAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBJ,eAkBI;AAAK,IAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmB,8BAAnB,CADJ,eAEI;AACI,IAAA,SAAS,EAAC,qBADd;AAEI,IAAA,IAAI,EAAC,GAFT;AAGI,IAAA,KAAK,EAAEC,WAHX;AAII,IAAA,QAAQ,EAAGwD,CAAD,IAAO;AACb3C,MAAAA,cAAc,CAAC2C,CAAC,CAACC,MAAF,CAASgD,KAAV,CAAd;AACA5G,MAAAA,eAAe,CAACG,WAAhB,GAA8B,IAA9B;AACH,KAPL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAUI;AACI,IAAA,SAAS,EAAEA,WAAW,KAAK,EAAhB,IAAsBH,eAAe,CAACG,WAAtC,GAAoD,kBAApD,GAAyE,4BADxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK,4DAFL,CAVJ,CAlBJ,CAfJ,EAmDKQ,IAAI,KAAK,CAAT,iBAAc,uDACX;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,eAEI;AACI,IAAA,SAAS,EAAC,0BADd;AAEI,IAAA,KAAK,EAAC,QAFV;AAGI,IAAA,KAAK,EAAEP,MAHX;AAII,IAAA,IAAI,EAAC,QAJT;AAKI,IAAA,QAAQ,EAAGuD,CAAD,IAAO;AACbzC,MAAAA,SAAS,CAACyC,CAAC,CAACC,MAAF,CAASgD,KAAV,CAAT;AACA5G,MAAAA,eAAe,CAACI,MAAhB,GAAyB,IAAzB;AACH,KARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbJ,eAcI;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwC,wCAAxC,CADJ,eAEI;AACI,IAAA,SAAS,EAAC,sBADd;AAEI,IAAA,KAAK,EAAC,UAFV;AAGI,IAAA,KAAK,EAAEC,QAHX;AAII,IAAA,IAAI,EAAC,QAJT;AAKI,IAAA,QAAQ,EAAGsD,CAAD,IAAO;AACbxC,MAAAA,WAAW,CAACwC,CAAC,CAACC,MAAF,CAASgD,KAAV,CAAX;AACA5G,MAAAA,eAAe,CAACK,QAAhB,GAA2B,IAA3B;AACH,KARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAdJ,eA0BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BJ,eA2BI;AAAO,IAAA,SAAS,EAAC,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwC,sBAAxC,CA3BJ,eA4Bd;AAAQ,IAAA,SAAS,EAAC,UAAlB;AAA6B,IAAA,QAAQ,EAAEsD,CAAC,IAAItC,QAAQ,CAACsC,CAAC,CAACC,MAAF,CAASgD,KAAT,CAAerB,QAAf,CAAwB,OAAxB,CAAD,CAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAQ,IAAA,SAAS,EAAC,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADD,eAEC;AAAQ,IAAA,SAAS,EAAC,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFD,CA5Bc,CADW,CAnDnB,EAwFK5E,IAAI,KAAK,CAAT,iBAAc,uDACX;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,OAAO,EAAC,kBADZ;AAEI,IAAA,SAAS,EAAC,gBAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGQ;AAAQ,IAAA,SAAS,EAAC,sEAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,SAAS,EAAC,8BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA+C,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA/C,CADJ,eAEI;AAAM,IAAA,SAAS,EAAC,8BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFJ,CAHR,CADJ,eASI;AACI,IAAA,SAAS,EAAC,OADd;AAEI,IAAA,EAAE,EAAC,kBAFP;AAGI,IAAA,IAAI,EAAC,MAHT;AAII,IAAA,MAAM,EAAC,SAJX;AAKI,IAAA,QAAQ,MALZ;AAMI,IAAA,QAAQ,EAAEgD,CAAC,IAAI;AACXD,MAAAA,WAAW,CAACC,CAAD,CAAX;AACA3D,MAAAA,eAAe,CAACM,KAAhB,GAAwB,IAAxB;AACH,KATL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,eAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBJ,eAoBI;AACI,IAAA,SAAS,EAAE,CAACmB,QAAD,GAAY,kCAAZ,GAAiD,wBADhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK,4BAFL,CApBJ,eAwBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBJ,eAyBI;AACI,IAAA,SAAS,EAAEF,IAAI,CAACiB,MAAL,KAAgB,CAAhB,IAAqBxC,eAAe,CAACM,KAArC,GAA6C,kBAA7C,GAAkE,4BADjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEK,wDAFL,CAzBJ,eA6BI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKwE,GADL,CA7BJ,CADJ,CADJ,CADW,CAxFnB,EAiIKnE,IAAI,KAAK,CAAT,iBAAc,uDACX;AAAK,IAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0CT,MAA1C,CAFJ,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,eAMI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAyC,IAAA,KAAK,EAAE;AAAC2G,MAAAA,UAAU,EAAE;AAAb,KAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2E1G,WAA3E,CAFJ,CANJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,eAWI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0C,MAAM2G,MAAM,CAAC1G,MAAD,CAAtD,CAFJ,CAXJ,eAeI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,eAgBI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,eAEI;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0CC,QAA1C,CAFJ,CAhBJ,eAoBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBJ,eAqBI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0Ce,KAAK,GAAG,mBAAH,GAAyB,sBAAxE,CAFJ,CArBJ,CADW,CAjInB,CAR2B,eAsK3B;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,SAAS,EAAET,IAAI,KAAK,CAAT,GAAa,mBAAb,GAAmC,SADlD;AAEI,IAAA,KAAK,EAAE;AAACoG,MAAAA,KAAK,EAAE;AAAR,KAFX;AAGI,IAAA,OAAO,EAAEpD,CAAC,IAAIT,KAAK,CAAC,CAAC,CAAF,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAOI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eASI;AACI,IAAA,SAAS,EAAC,SADd;AAEI,IAAA,KAAK,EAAE;AAAC6D,MAAAA,KAAK,EAAE;AAAR,KAFX;AAGI,IAAA,OAAO,EAAEpD,CAAC,IAAIT,KAAK,CAAC,CAAD,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIKvC,IAAI,KAAK,CAAT,GAAa,WAAb,GAA2B,WAJhC,CATJ,CAtK2B,CAHrC,CADE;AA8LH,CAnaD;;AAqaA,eAAeJ,MAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Vender.css';\n\n/* axios */\nimport axios from \"axios\";\n\n/* datos */\nimport { categorias, baseURL, publicarURL, verArticuloURL, hex, deshex, arrayBase64, base64Archivo, Redirigir } from \"../datos\";\n\n/* react-router-dom */\nimport { useParams } from \"react-router-dom\";\n\nimport { Camera } from \"react-bootstrap-icons\";\n\n/* material ui */\nimport Paper from '@material-ui/core/Paper';\n\nimport { \n    XCircle } from \"react-bootstrap-icons\";\nimport { useRef } from 'react';\n\n/*  usado para comprobar si los campos fueron editados al menos una vez\n    antes de mostrar errores en la validacion */\nconst camposActivados = {\n    categoria: false,\n    titulo: false,\n    descripcion: false,\n    precio: false,\n    cantidad: false,\n    fotos: false,\n};\n\nconst Vender = (props) => {\n\tconst [mostrar, setMostrar] = useState(false);\n\n    const [paso, setPaso] = useState(0);\n\tconst [id, setId] = useState(null);\n    const [titulo, setTitulo] = useState(\"\");\n    const [descripcion, setDescripcion] = useState(\"\");\n    const [categoria, setCategoria] = useState(\"-1\");\n    const [precio, setPrecio] = useState(\"\");\n    const [cantidad, setCantidad] = useState(1);\n    const [envio, setEnvio] = useState(true);\n    const [fotos, setFotos] = useState([]);\n    const [uris, setUris] = useState([]);\n    const [excedido, setExcedido] = useState(false);\n    const [error, setError] = useState(false);\n    /* se usa pura y exclusivamente para forzar un re-renderizado (?) */\n    const [_, setErrores] = useState(false);\n\n\tconst { idpublicacion } = useParams();\n\n\tuseEffect( _ => {\n\t\tif(idpublicacion) {\n\t\t\tlet url = baseURL + verArticuloURL + \"/\" + idpublicacion;\n\t\t\taxios.get(url)\n\t\t\t.then(res => {\n\t\t\t\tlet p = res.data;\n\t\t\t\tsetId(p.id);\n\t\t\t\tsetTitulo(deshex(p.titulo));\n\t\t\t\tsetDescripcion(deshex(p.descripcion));\n\t\t\t\tsetCategoria(p.categoria);\n\t\t\t\tsetPrecio(p.precio);\n\t\t\t\tsetCantidad(p.cantidad);\n\t\t\t\tfor(let k=0;k<p.imagenes.length;k++){\n\t\t\t\t\tlet dataurl = \"data:image/*;base64,\"+arrayBase64(p.imagenes[k].bytes);\n\t\t\t\t\tsetUris((uris) => [...uris, dataurl] ); \n\t\t\t\t\tlet ff = base64Archivo(dataurl, \"foto\"+k);\n                    setFotos(fotos => [...fotos, ff]);\n\t\t\t\t}\n\t\t\t\tsetMostrar(true);\n\t\t\t})\n\t\t\t.catch(err => {\n                console.log(err);\n                setError(true)\n            });\n\t\t}\n\t\telse setMostrar(true);\n\t}, []);\n\n    /* titulos de los pasos */\n    const titulos = [\n        'Seleccion\\u00e1 la categor\\u00eda del producto', \n        'Indic\\u00e1 un t\\u00edtulo y una descripci\\u00f3n', \n        'Establece el precio y la cantidad disponible', \n        'Agreg\\u00e1 fotos del producto', \n        'Publicar'\n    ];\n\n    /* nombres de los pasos */\n    const pasos = [\n        'Categor\\u00eda', \n        'T\\u00edtulo y descripci\\u00f3n', \n        'Precio y cantidad', \n        'Fotos', \n        'Publicar'\n    ];\n    \n    /* funcion para avanzar o retroceder */\n    const mover = direccion => {\n        let hayErrores = false;\n        if(direccion === 1) {\n            switch(paso) {\n                case 0:\n                    hayErrores = categoria === \"-1\";\n                    camposActivados.categoria = categoria === \"-1\";\n                    break;\n                case 1:\n                    hayErrores = titulo === \"\" || descripcion === \"\";\n                    camposActivados.titulo = titulo === \"\";\n                    camposActivados.descripcion = descripcion === \"\";\n                    break;\n                case 2:\n                    if(precio === \"\") setPrecio(\"0\");\n                    if(cantidad === \"\") setCantidad(\"1\");\n                    break;\n                case 3:\n                    hayErrores = uris.length === 0;\n                    camposActivados.fotos = uris.length === 0;\n                    break;\n                default: break;\n            }\n        }\n        setErrores(hayErrores);\n        if(hayErrores) return;\n\n\t\tif(paso === pasos.length - 1 && direccion > 0) {finalizarPublicacion(); return;}\n\t\tif(paso + direccion < 0 || paso + direccion >= pasos.length) return;\n        setPaso(paso + direccion);\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n    };\n    \n    /* funcion para subir imagenes del producto, en el paso \"Fotos\" */\n    const cargarFotos = (e) => {\n        if(e.target.files){\n            setExcedido(e.target.files.length + uris.length > 7);\n            if(e.target.files.length + uris.length <= 7)\n                for(let i = 0; i < e.target.files.length; i++)\n                {\n                    let item = e.target.files[i];\n                    if(item.size >= 1048576)\n                    {\n                        console.log(\"El archivo debe ser menor a 1MB.\");\n                        continue;\n                    }\n\n                    let filereader = new FileReader();\n                    filereader.onload = (ev) => {\n                        setUris((uris) => [...uris, ev.target.result] );\n                        setFotos(fotos => [...fotos, item]);\n                    };\n                    filereader.readAsDataURL(e.target.files[i]);\n                }\n        }\n        if (props.onChange !== undefined)\n            props.onChange(e);\n    };\n\n    /* miniaturas de vista previa de las fotos subidas en el paso \"Fotos\" */\n    const Miniatura = () => {\n        let imgTag = null;\n        if (uris.length > 0) {\n            imgTag = [];\n            uris.map((item, i) => {\n                imgTag.push(\n                    <div className=\"publicacion-foto\">\n                        <img className=\"img\" src={item} alt=\"Imagen\" />\n                        <span\n                            className=\"btn-eliminar\"\n                            atr={i}\n                            onClick={(e) => borrarImagen(e)}>\n                            <XCircle />\n                        </span>\n                    </div>\n                );\n            });\n        }\n        return imgTag;\n    };\n\n    /* arreglo de miniaturas */\n    const min = Miniatura();\n\n    /* funcion del boton X que se muestra en el centro de las miniaturas, al asomar el mouse */\n    const borrarImagen = (e) => {\n        let at = e.currentTarget.getAttribute(\"atr\");\n        setUris((uris) => uris.filter((item, i) => i != at));\n        setFotos((fotos) => fotos.filter((item, i) => i != at));\n        //setUris(uris.filter((item, i) => i != at));\n        setExcedido(excedido.length > 7);\n    }\n\n    function urlRepresentativo(s) {\n\tconst permitidos = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n\tlet str = s;\n\twhile(str.includes(\"  \")) str = str.replaceAll(\"  \", \" \");\n\tfor(let k=0; k<=str.length;k++) {\n\t    let c = str.charAt(k);\n\t    if(!permitidos.includes(c.toLowerCase())) str = str.replaceAll(c, \"-\");\n    }\n    while(str.includes(\"--\")) str = str.replaceAll(\"--\", \"-\");\n\treturn str;\n    }\n\n    function finalizarPublicacion() {\n        let usr_dataid = props.dataId;\n        const imgData = new FormData();\n\t\tif(id) imgData.append(\"id\", id);\n        imgData.append(\"data_id\", usr_dataid);\n        imgData.append(\"categoria\", categoria);\n        imgData.append(\"titulo\", hex(titulo));\n        imgData.append(\"url\", urlRepresentativo(titulo));\n        imgData.append(\"descripcion\", hex(descripcion));\n        imgData.append(\"precio\", precio);\n        imgData.append(\"cantidad\", cantidad.toString());\n        imgData.append(\"envios\", envio ? \"1\" : \"0\");\n        for(let i = 0; i < fotos.length; i++) {\n            imgData.append(\"foto\", fotos[i]);\n        }\n        axios.post(baseURL + publicarURL, imgData).then(res => {\n\t\t\tif(res.data == \"0\") {\n\t\t\t\tconsole.log(res);\n\t\t\t\tsetPaso(-1);\n            }\n            else console.log(res.data);\n        })\n        .catch(err => console.log(err));\n    }\n\n    const Categoria = (props) => {\n        let ref = useRef();\n        const catClick = (e) => {\n            let cn = ref.current.getAttribute(\"catnum\");\n            //  setCategoria(cn);\n            setCategoria(props.catnum);\n        }\n\n        return(\n            <div\n                className={categoria === props.catnum ? \"categoria-vender seleccionado dflex border-box box-shadow-1\" \n                             : \"categoria-vender dflex border-box box-shadow-1\"}\n                catnum={props.catnum}\n                ref={ref}\n                onClick={(e) => catClick(e)}>\n                <div className=\"subcontenedor dflex pointer-events-none user-select-none\">\n                    <span className=\"categoria-icono pointer-events-none user-select-none\">{props.datos.icono}</span>\n                    <span className=\"categoria-titulo pointer-events-none user-select-none\">{props.datos.titulo}</span>\n                </div>\n            </div>\n        )\n    };\n\n\tconst ConfirmacionPublicacion = () => {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<h2>{\"\\u00a1Publicaci\\u00f3n realizada con \\u00e9xito!\"}</h2>\n\t\t\t</div>\n\t\t)\n\t}\n\n    return(\n\t\t<>\n        {error && <Redirigir donde=\"/error\" /> }\n\t\t{!error && paso === -1 && <ConfirmacionPublicacion />}\n\t\t{!error && mostrar && paso !== -1 && <Paper\n            className=\"vender-articulo-view\"\n            elevation={3}>\n            <div className=\"titulos-etapas\">\n                <h2 className=\"vender-articulo-titulo titulo-1 gris-oscuro\">\n                    {titulos[paso]}\n                </h2>\n            </div>\n            <div>\n                {/* categoria */}\n                {paso === 0 && <>\n                    \n                    <div className=\"categorias-contenedor talign-center\">\n                        {categorias.map(item => <Categoria datos={item} catnum={item.categoria} />)}\n                    </div>\n                    <small\n                        className={categoria === \"-1\" && camposActivados.categoria ? \"validacion-error\" : \"validacion-error invisible\"}>\n                        {\"Eleg\\u00ed una categor\\u00eda adecuada para tu publicaci\\u00f3n\"}\n                    </small>\n                </>}\n\n                {/* titulo */}\n                {paso === 1 && \n                <>\n                    <div className=\"titulo-publicacion-contenedor\">\n                        <label htmlFor=\"\">{\"T\\u00edtulo de la publicaci\\u00f3n\"}</label>\n                        <input\n                            className=\"n-textfield width100\"\n                            label={\"T\\u00edtulo\"} \n                            variant=\"outlined\"\n                            value={titulo}\n                            onChange={(e) => {\n                                camposActivados.titulo = true;\n                                setTitulo(e.target.value);\n                            }} />\n                        <small\n                            className={titulo === \"\" && camposActivados.titulo ? \"validacion-error\" : \"validacion-error invisible\"}>\n                            {\"Escrib\\u00ed un t\\u00edtulo para tu publicaci\\u00f3n\"}\n                        </small>\n                    </div>\n                    <br/>\n                    <div className=\"descripcion-publicacion-contenedor\">\n                        <label htmlFor=\"\">{\"Escriba una descripci\\u00f3n\"}</label>\n                        <textarea\n                            className=\"n-textarea width100\"\n                            rows=\"5\"\n                            value={descripcion}\n                            onChange={(e) => {\n                                setDescripcion(e.target.value); \n                                camposActivados.descripcion = true;\n                            }} />\n                        <small \n                            className={descripcion === \"\" && camposActivados.descripcion ? \"validacion-error\" : \"validacion-error invisible\"}>\n                            {\"Escrib\\u00ed una descripci\\u00f3n para tu publicaci\\u00f3n\"}\n                        </small>\n                    </div>\n                </>}\n                \n                {/* precio y cantidad */}\n                {paso === 2 && <>\n                    <div className=\"precio-cantidad-publicacion-contenedor\">\n                        <div className=\"precio-cantidad-publicacion__precio\">\n                            <label className=\"form__label dblock\" >Establece un precio: </label>\n                            <input \n                                className=\"n-textfield width100 xhx\"\n                                label=\"Precio\" \n                                value={precio}\n                                type=\"number\"\n                                onChange={(e) => {\n                                    setPrecio(e.target.value); \n                                    camposActivados.precio = true;\n                                }} />\n                        </div>\n                        <br/>\n                        <div className=\"precio-cantidad-publicacion__cantidad\">\n                            <label className=\"form__label dblock\" >{\"\\u00bfQu\\u00e9 cantidad dispon\\u00e9s?\"}</label>\n                            <input \n                                className=\"n-textfield width100\"\n                                label=\"Cantidad\" \n                                value={cantidad}\n                                type=\"number\"\n                                onChange={(e) => {\n                                    setCantidad(e.target.value); \n                                    camposActivados.cantidad = true;\n                                }} />\n                        </div>\n                        <br/>\n                        <label className=\"form__label dblock\" >{\"Forma de env\\u00edo:\"}</label>\n\t\t\t\t\t\t<select className=\"n-select\" onChange={e => setEnvio(e.target.value.includes(\"Envio\"))}>\n\t\t\t\t\t\t\t<option className=\"opt\">Envio a domicilio</option>\n\t\t\t\t\t\t\t<option className=\"opt\">Retiro en el local</option>\n\t\t\t\t\t\t</select>\n                    </div>\n                </>}\n\n                {/* fotos */}\n                {paso === 3 && <>\n                    <div className=\"fotos-publicacion-contenedor\">\n                        <div className=\"talign-center\">\n                            <div className=\"subir-fotos\">\n                                <label\n                                    htmlFor=\"AAwTrket449EAAmd\"\n                                    className=\"button dinline\">\n                                        <button className=\"vender-articulo__bot-agregar-fotos n-boton dflex pointer-events-none\">\n                                            <span className=\"sp-icono pointer-events-none\"><Camera /></span>\n                                            <span className=\"sp-label pointer-events-none\">Agregar fotos</span>\n                                        </button>\n                                </label>\n                                <input\n                                    className=\"dnone\"\n                                    id=\"AAwTrket449EAAmd\"\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    multiple\n                                    onChange={e => {\n                                        cargarFotos(e); \n                                        camposActivados.fotos = true;\n                                    }}/>\n                                <br/>\n                                <small\n                                    className={!excedido ? \"limite-excedido invisible dblock\" : \"limite-excedido dblock\"}>\n                                    {\"\\u00a1M\\u00e1ximo 7 fotos!\"}\n                                </small>\n                                <br/>\n                                <small\n                                    className={uris.length === 0 && camposActivados.fotos ? \"validacion-error\" : \"validacion-error invisible\"}>\n                                    {\"Agreg\\u00e1 al menos una foto para tu publicaci\\u00f3n\"}\n                                </small>\n                                <div className=\"contenedor-fotos-publicacion\">\n                                    {min}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {/* final */}\n                {paso === 4 && <>\n                    <div className=\"finalizar-publicacion-contenedor\">\n                        <div className=\"finalizar-campo\">\n                            <h5 className=\"finalizar-campo__info\">Titulo: </h5>\n                            <span className=\"finalizar-campo__valor\">{titulo}</span>\n                        </div>\n                        <br/>\n                        <div className=\"finalizar-campo\">\n                            <h5 className=\"finalizar-campo__info\">Descripcion: </h5>\n                            <span className=\"finalizar-campo__valor\" style={{whiteSpace: \"pre-wrap\"}}>{descripcion}</span>\n                        </div>\n                        <br/>\n                        <div className=\"finalizar-campo\">\n                            <h5 className=\"finalizar-campo__info\">Precio: </h5>\n                            <span className=\"finalizar-campo__valor\">{\"$\" + Number(precio)}</span>\n                        </div>\n                        <br/>\n                        <div className=\"finalizar-campo\">\n                            <h5 className=\"finalizar-campo__info\">Cantidad disponible: </h5>\n                            <span className=\"finalizar-campo__valor\">{cantidad}</span>\n                        </div>\n                        <br/>\n                        <div className=\"finalizar-campo\">\n                            <h5 className=\"finalizar-campo__info\">Envios: </h5>\n                            <span className=\"finalizar-campo__valor\">{envio ? \"Envio a domicilio\" : \"Solo retiro en local\"}</span>\n                        </div>\n                    </div>\n                </>}\n            </div>\n            <div className=\"navegacion-pasos dflex justify-sb\">\n                <button\n                    className={paso === 0 ? \"invisible n-boton\" : \"n-boton\"}\n                    style={{width: 140}}\n                    onClick={e => mover(-1)} >\n                    Anterior\n                </button>\n                <div className=\"publicacion-steeper\">\n                </div>\n                <button\n                    className=\"n-boton\"\n                    style={{width: 140}}\n                    onClick={e => mover(1)} >\n                    {paso === 4 ? \"Finalizar\" : \"Siguiente\"}\n                </button>\n            </div>\n            \n        </Paper>}\n\t\t</>\n    )\n};\n\nexport default Vender;\n"]},"metadata":{},"sourceType":"module"}